<h1>Watch Coordinate</h1>
<div class="wrapper">
    <div>
        <label">watch Id 1:</label>
        <input type="string" id="id1"> <br>
        <label">Longitude:</label>
        <input type="number" id="longitude1"> <br>
        <label">Latitude:</label>
        <input type="number" id="latitude1"> <br>
        <label">Last updated:</label>
        <input type="string" id="lastupdated1"> <br>
        <button type="button" onclick="sendData(1)">to Server</button> <br>
        <button type="button" onclick="receiveData(1)">from Server</button> <br>
    </div>
    <div>
        <label">watch Id 2:</label>
        <input type="string" id="id2"> <br>
        <label">Longitude:</label>
        <input type="number" id="longitude2"> <br>
        <label>Latitude:</label>
        <input type="number" id="latitude2"> <br>
        <label">Last updated:</label>
        <input type="string" id="lastupdated2"> <br>
        <button type="button" onclick="sendData(2)">to Server</button> <br>
        <button type="button" onclick="receiveData(2)">from Server</button> <br>
    </div>
</div>  

<style>
  page {
      size: A4 landscape;
      margin: 0;
  }
  html, body {
      margin: 0;      
  }
  html {
    font-family: sans-serif;
    font-size: small;
    background: cyan;
  }
  body {
      width: 200mm;
      height: 210mm;     
      background: white;
      margin-top: -1px;
  }
  .wrapper {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    justify-content: space-between;
    margin: 0 4rem 2rem;
  }
</style>

<script>

var id1 = document.getElementById("id1");
var latitude1 = document.getElementById("longitude1");
var longitude1 = document.getElementById("latitude1");
var lastupdated1 = document.getElementById("lastupdated1");

var id2 = document.getElementById("id2");
var latitude2 = document.getElementById("longitude2");
var longitude2 = document.getElementById("latitude2");
var lastupdated2 = document.getElementById("lastupdated2");

function sendData(i) {
    if (i == 1) sendToServer(id1.value, latitude1.value, longitude1.value);
    if (i == 2) sendToServer(id2.value, latitude2.value, longitude2.value);
}
function receiveData(i) {
    if (i == 1) path = "/get?i=" + id1.value;
    if (i == 2) path = "/get?i=" + id2.value;
    console.log(path);
    fetch(path).then(function (response) {
        return response.text();
    }).then(function (answer) {
        console.log(answer);

        var json = JSON.parse(answer);
        if (i == 1) {
            id1.value = json.id;
            longitude1.value = json.longitude;
            latitude1.value = json.latitude;
            lastupdated1.value = json.lastupdated;
        }
        if (i == 2) {
            id2.value = json.id;
            longitude2.value = json.longitude;
            latitude2.value = json.latitude;
            lastupdated2.value = json.lastupdated;
        }
        
    }).catch(function (err) {
        console.warn("unexpected error", err)
    })
}

function sendToServer(i, a, b) {
    var path = "/set?i=" + i + "&a=" + a + "&b=" + b;
    console.log(path);
    fetch(path).then(function (response) {
        return response.text();
    }).then(function (html) {
        console.log(html);
    }).catch(function (err) {
        console.warn("unexpected error", err)
    })
}

</script>